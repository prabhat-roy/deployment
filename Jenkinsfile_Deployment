pipeline {
    agent any
    stages {
        stage('Cleanup Workspace') {
            steps {
                script {
                    echo "[INFO] Cleaning up the workspace..."
                    // Load the cleanup script and execute it
                    def cleanup = load 'groovy/cleanup.groovy'
                    cleanup.cleanupWorkspace() // Assuming this handles workspace cleanup
                    echo "[INFO] Workspace cleaned successfully."
                }
            }
        
        }
        stage('Load Global Env') {
            steps {
                script {
                    // Load environment variables from global.env
                    def envLoader = load 'groovy/global.groovy'
                    envLoader.loadGlobalEnv()
                    echo "[INFO] Global environment loaded successfully."
                    echo "[INFO] GITHUB_URL: ${env.GITHUB_URL}"
                    echo "[INFO] BRANCH: ${env.BRANCH}"
                }
            }
        }
        
    }
}