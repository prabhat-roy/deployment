pipeline {
    agent any

    environment {
        ENV_FILE_PATH = 'groovy/Deployment.env'
    }

    stages {
        stage('Load Environment Variables') {
            steps {
                script {
                     // Load the Groovy script that parses the env file
                    def envLoader = load 'groovy/LoadEnvVars.groovy'

                    // Call the loader with path to Deployment.env
                    def envVars = envLoader.call('groovy/Deployment.env')

                    // Inject into Jenkins environment
                    envVars.each { key, value ->
                        echo "[INFO] Setting env: ${key}=${value}"
                        env[key] = value
                }
            }
        }
                        
	}
    }
}

   